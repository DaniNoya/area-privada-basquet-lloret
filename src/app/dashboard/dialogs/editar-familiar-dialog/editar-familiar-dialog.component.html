<div class="container">
  <button id="close" mat-dialog-close class="close outline-none"><i class="fas fa-times-circle"></i></button>
  <form #editForm="ngForm" (ngSubmit)="save()">
    <div class="form-row">
      <div class="col-1">
        <label for="inputId">Id</label>
        <input type="number" class="form-control" id="inputId" name="id" value="{{data.familiar.id}}" [(ngModel)]="data.familiar.id" disabled>
      </div>
    </div>
    <div class="form-row mt-3">
      <div class="col">
        <label for="inputNombre">Nombre</label>
        <input type="text" class="form-control" id="inputNombre" name="nombre" #inputNombre="ngModel" [(ngModel)]="data.familiar.nombre" required>
        <div *ngIf="!inputNombre.valid && (inputNombre.dirty || inputNombre.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col">
        <label for="inputPrimerApellido">Primer Apellido</label>
        <input type="text" class="form-control" id="inputPrimerApellido" name="primer_apellido" #inputPrimerApellido="ngModel" [(ngModel)]="data.familiar.primer_apellido" required>
        <div *ngIf="!inputPrimerApellido.valid && (inputPrimerApellido.dirty || inputPrimerApellido.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col">
        <label for="inputSegundoApellido">Segundo Apellido</label>
        <input type="text" class="form-control" id="inputSegundoApellido" name="segundo_apellido" [(ngModel)]="data.familiar.segundo_apellido">
      </div>
    </div>
    <div class="form-row mt-3">
      <div class="col">
        <label for="inputDni">D.N.I./N.I.E</label>
        <input type="text" class="form-control" id="inputDni" name="dni" #inputDni="ngModel" [(ngModel)]="data.familiar.dni" required>
        <div *ngIf="!inputDni.valid && (inputDni.dirty || inputDni.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col">
        <label for="inputFechaNacimiento">Fecha Nacimiento</label>
        <input type="date" class="form-control" id="inputFechaNacimiento" name="fecha_nacimiento"[(ngModel)]="data.familiar.fecha_nacimiento">
      </div>
      <div class="col">
        <label for="inputTelefono1">Teléfono 1</label>
        <input type="text" class="form-control" id="inputTelefono1" name="telefono1" #inputTelefono1="ngModel" [(ngModel)]="data.familiar.telefono1" required>
        <div *ngIf="!inputTelefono1.valid && (inputTelefono1.dirty || inputTelefono1.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col">
        <label for="inputTelefono2">Teléfono 2</label>
        <input type="text" class="form-control" id="inputTelefono2" name="telefono2" [(ngModel)]="data.familiar.telefono2">
      </div>
    </div>
    <div class="form-row mt-3">
      <div class="col-6">
        <label for="inputDireccion">Dirección</label>
        <input type="text" class="form-control" id="inputDireccion" name="direccion" #inputDireccion="ngModel" [(ngModel)]="data.familiar.direccion" required>
        <div *ngIf="!inputDireccion.valid && (inputDireccion.dirty || inputDireccion.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col-2">
        <label for="inputCodigoPostal">Código Postal</label>
        <input type="text" class="form-control" id="inputCodigoPostal" name="codigo_postal" #inputCodigoPostal="ngModel"  [(ngModel)]="data.familiar.codigo_postal" required>
        <div *ngIf="!inputCodigoPostal.valid && (inputCodigoPostal.dirty || inputCodigoPostal.touched)" class="text-danger">Campo requerido</div>
      </div>
      <div class="col-4">
        <label for="inputLocalidad">Población</label>
        <input type="text" class="form-control" id="inputLocalidad" name="localidad" #inputLocalidad="ngModel" [(ngModel)]="data.familiar.localidad" required>
        <div *ngIf="!inputLocalidad.valid && (inputLocalidad.dirty || inputLocalidad.touched)" class="text-danger">Campo requerido</div>
      </div>
    </div>
    <div class="form-row mt-3">
      <div class="col">
        <label for="inputEmail">Correo electrónico</label>
        <input type="email" class="form-control" id="inputEmail" name="email" #inputEmail="ngModel" [(ngModel)]="data.familiar.email" required>
        <div *ngIf="!inputEmail.valid && (inputEmail.dirty || inputEmail.touched)" class="text-danger">El correo debe tener un formato correcto</div>
      </div>
      <div class="col">
        <label for="inputObservaciones">Observaciones</label>
        <textarea class="form-control" id="inputObservaciones" name="observaciones" [(ngModel)]="data.familiar.observaciones"></textarea>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="selectSexo">Sexo</label>
        <select class="form-control" id="selectSexo" name="id_sexo" [(ngModel)]="data.familiar.id_sexo" required>
          <option *ngFor="let sexo of sexos" value="{{ sexo.id }}">{{ sexo.sexo }}</option>
        </select>
      </div>
    </div>
    <button [disabled]="!editForm.form.valid" type="submit" class="btn btn-success">Guardar</button>
    <button mat-dialog-close class="btn btn-secondary ml-3">Cancelar</button>
    <div class="btn alert-danger ml-3" *ngIf="error">{{ error }}</div>
  </form>
</div>
<ngx-spinner
  bdColor = "rgba(51,51,51,0.8)"
  size = "medium"
  color = "#fff"
  type = "ball-climbing-dot"
  [fullScreen] = "true"
>
  <p style="color: white" > Espere por favor... </p>
</ngx-spinner>
